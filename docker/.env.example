# Copy to .env in this directory (docker/.env).
# Used by: docker compose (worker, cloud-sql-auth).
# Required for Cloud SQL Auth Proxy and app database connection.

# -----------------------------------------------------------------------------
# Cloud SQL Auth Proxy (required when using the cloud-sql-auth service)
# Get the connection name after: terraform output cloud_sql_connection_name
# Format: project-id:region:instance-name (e.g. myproject:us-central1:streaming-db)
# -----------------------------------------------------------------------------
CLOUD_SQL_CONNECTION_NAME=your-project-id:your-region:streaming-db

# -----------------------------------------------------------------------------
# Application database (Pydantic Settings: use double underscore SECTION__key)
# When using docker compose, DB__host must be the proxy service name: cloud-sql-auth
# -----------------------------------------------------------------------------
DB__host=cloud-sql-auth
DB__port=5432
DB__name=donate
DB__user=your_db_user
DB__password=your_secure_password

# -----------------------------------------------------------------------------
# Overlay API (optional; defaults: 0.0.0.0, 5001; payment link auth when API__payment_link_api_key set)
# -----------------------------------------------------------------------------
# API__host=0.0.0.0
# API__port=5001
# API__payment_link_api_key=   # When set, GET/PUT /payment-link require Bearer or X-API-Key

# -----------------------------------------------------------------------------
# Stripe webhook (optional; when set, POST /stripe-webhook creates donor on checkout.session.completed)
# -----------------------------------------------------------------------------
# STRIPE__webhook_secret=   # Stripe webhook signing secret (whsec_...)

# -----------------------------------------------------------------------------
# Encoding and worker (optional; see repo root .env.example for all keys)
# -----------------------------------------------------------------------------
# ENCODING__cbr_bitrate_k=4500
# WORKER__overlay_refresh_interval_seconds=8
# WORKER__default_input_url=rtsp://localhost:554/stream
# WORKER__source_retry_interval_seconds=5
# WORKER__rtmp_output_url=rtmp://nginx-rtmp:1935/out/stream   # For YouTube Live multi-push
# For local testing with sample file: WORKER__default_input_url=/test_media/sample.mp4

# -----------------------------------------------------------------------------
# YouTube Live (multiple accounts; set after creating OAuth client and using /youtube/connect)
# -----------------------------------------------------------------------------
# YOUTUBE__CLIENT_ID=
# YOUTUBE__CLIENT_SECRET=
# YOUTUBE__REFRESH_TOKENS=   # JSON: {"UCxxx":"refresh_token", ...}
# YOUTUBE__PUSH_CONF_PATH=/etc/nginx/conf.d/youtube_push.conf
# YOUTUBE__REFRESH_INTERVAL_SECONDS=300
